(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-176fc75b"],{2947:function(t,e,a){},c16c:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("div",{staticClass:"setting-wrap box"},[a("RegionSelector",{staticClass:"setting-item",on:{change:t.regionChangeHandle}}),a("DataTypeSelector",{staticClass:"setting-item",attrs:{label:"类型"},on:{change:t.dataTypeChangeHandle}}),a("div",{staticClass:"setting-item"},[a("span",{staticClass:"col-label"},[t._v("开始时间")]),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},on:{change:t.dateChangeHandle},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),t.lineRachChartOptins.renderData.length>0?a("LineRace",{key:this.lineChartKey,staticClass:"chart box",attrs:{options:t.lineRachChartOptins,renderData:t.lineRachChartOptins.renderData,title:t.lineRachChartOptins.title}}):t._e()],1)},i=[],s=(a("ac1f"),a("1276"),a("d3b7"),a("159b"),a("7db0"),a("99af"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")}),r=[],l=(a("c740"),a("22b4")),c=a("1be7"),o=a("c32b"),h=a("5e81"),u=a("9394"),d=a("2da7"),p=a("4b2a"),f=a("e600"),m=a("3620"),v=a("ee29"),C=a("c55a"),g=a("f95e");l["a"]([h["a"],u["a"],d["a"],p["a"],f["a"],m["a"],g["a"],v["a"],C["a"]]);var b={props:{renderData:{type:Array,required:!0},title:{type:String},options:{type:Object,required:!0,validator:function(t){for(var e=["startDate","countries","countryColName","dateColName","dataItemName"],a=0,n=e;a<n.length;a++){var i=n[a];if(!t[i])return!1}return!0}}},mounted:function(){this.init()},methods:{init:function(){var t=this.$el,e=c["b"](t),a=this.getOptions(this.renderData);e.setOption(a),this.chart=e},getOptions:function(t){var e=this.options.countries,a=this.options.startDate,n=this.options.countryColName,i=this.options.dateColName,s=this.options.dataItemName,r=t[0].findIndex((function(t){return t===n})),l=t[0].findIndex((function(t){return t===s})),c=[],h=[];o["a"].each(e,(function(t){var e="dataset_"+t;c.push({id:e,fromDatasetId:"dataset_raw",transform:{type:"filter",config:{and:[{dimension:i,gte:a,parser:"time"},{dimension:n,"=":t}]}}}),h.push({type:"line",datasetId:e,showSymbol:!1,name:t,endLabel:{show:!0,formatter:function(t){return t.value[r]+": "+t.value[l]}},labelLayout:{moveOverlap:"shiftY"},emphasis:{focus:"series"},encode:{x:i,y:s,label:[n,s],itemName:i,tooltip:[s]}})}));var u={animationDuration:5e3,dataset:[{id:"dataset_raw",source:t}].concat(c),title:{text:this.title},tooltip:{order:"valueDesc",trigger:"axis"},xAxis:{type:"category",nameLocation:"middle"},yAxis:{name:s},grid:{right:140},series:h};return u}}},y=b,D=a("2877"),O=Object(D["a"])(y,s,r,!1,null,"526934d2",null),R=O.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span",{staticClass:"col-label"},[t._v("城市")]),a("el-cascader",{attrs:{options:t.options,props:t.props,clearable:""},on:{change:t.changeHandle}})],1)},x=[],N=(a("d81d"),{data:function(){return{props:{multiple:!0},options:[]}},mounted:function(){this.getRegions()},methods:{getRegions:function(){this.options=[{label:"中国",value:"cn",children:[{label:"北京",value:"bj",children:[{label:"顺义",value:"sy"}]},{label:"广东省",value:"gb",children:[{label:"深圳",value:"sz"},{label:"广州",value:"gz"}]}]}]},changeHandle:function(t){t.map((function(t){}));this.$emit("change",t)}}}),w=N,T=Object(D["a"])(w,_,x,!1,null,"7ce15aa0",null),I=T.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span",{staticClass:"col-label"},[t._v(t._s(t.label))]),a("el-select",{attrs:{placeholder:""},on:{change:function(e){return t.$emit("change",e)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)},k=[],H=a("fc7d"),S={data:function(){return{options:H["a"].covidDataUtil.covidDataTypeList,value:"confirmed"}},props:{label:{type:String},dataType:{type:String,default:"confirmed"}},created:function(){this.value=this.dataType}},$=S,j=Object(D["a"])($,L,k,!1,null,"36cc80aa",null),E=j.exports,K=(a("bc3a"),{components:{LineRace:R,RegionSelector:I,DataTypeSelector:E},data:function(){return{lineRachChartOptins:{renderData:[],countries:["武汉市","深圳市","广州市","黄冈市"],startDate:"2020-02-14",countryColName:"city",dateColName:"date",dataItemName:"",title:""},startDate:"2020-02-14",cvData:null,lineChartKey:0}},mounted:function(){var t=this;this.getData().then((function(e){t.cvData=e,t.showLineRaceChart(e)}))},methods:{getData:function(){return this.$api.getCovidData().then((function(t){var e=t.data.split("\r\n"),a=[];return e.forEach((function(t,e){var n=t.split(",");0===e?a.push(n):n[6]&&([7,8,9,10].forEach((function(t){n[t]=parseInt(n[t])})),a.push(n))})),a}))},showLineRaceChart:function(){this.lineRachChartOptins.startDate="2020-02-14",this.lineRachChartOptins.countryColName="city",this.lineRachChartOptins.dateColName="date",this.lineRachChartOptins.dataItemName="confirmed",this.lineRachChartOptins.title="增长",this.lineRachChartOptins.renderData=this.cvData,this.lineChartKey+=1},regionChangeHandle:function(t){this.lineRachChartOptins.countries=["武汉市","深圳市"],this.lineRachChartOptins.title=this.getTitle(),this.lineChartKey+=1},dataTypeChangeHandle:function(t){this.lineRachChartOptins.dataItemName=t,this.lineRachChartOptins.title=this.getTitle(),this.lineChartKey+=1},dateChangeHandle:function(t){this.lineRachChartOptins.startDate=t,this.lineRachChartOptins.title=this.getTitle(),this.lineChartKey+=1},getTitle:function(){var t=this,e=H["a"].covidDataUtil.covidDataTypeList.find((function(e){return e.value===t.lineRachChartOptins.dataItemName}));return"自 ".concat(this.lineRachChartOptins.startDate," 以来的 ").concat(e.label," 数据")}}}),A=K,q=(a("fc11"),Object(D["a"])(A,n,i,!1,null,"7a7b7cac",null));e["default"]=q.exports},fc11:function(t,e,a){"use strict";a("2947")}}]);