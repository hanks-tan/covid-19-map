(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["city"],{"0ac2":function(e,t,a){},"0d5f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{id:"map"}},[e.mapObj?a("div",{staticClass:"top"},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}},[a("el-button",{attrs:{slot:"prepend",icon:"el-icon-menu"},on:{click:function(t){e.showLayerSwith=!e.showLayerSwith}},slot:"prepend"})],1),a("LayerSelector",{directives:[{name:"show",rawName:"v-show",value:e.showLayerSwith,expression:"showLayerSwith"}],staticClass:"layer"})],1):e._e(),a("div",{staticClass:"bottom"},[a("div",{staticClass:"sos"},[a("el-button",{attrs:{icon:"el-icon-search",circle:""}})],1)])])])},i=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layer_warp"},e._l(e.layers,(function(t,n){return a("div",{key:n,staticClass:"item",on:{click:function(a){return e.layerGroupChange(t)}}},[a("span",{class:{active:t.checked}},[e._v(e._s(t.label))]),e._l(t.children,(function(t,n){return a("div",{key:n,staticClass:"sub-item",class:{active:t.checked},on:{click:function(a){return a.stopPropagation(),e.layerChange(t)}}},[e._v(" "+e._s(t.label)+" ")])}))],2)})),0)},c=[],o=(a("d3b7"),a("159b"),a("99af"),a("b0c0"),a("b805")),l=a("d4ec"),s=a("bee2"),u=a("257e"),f=a("262e"),h=a("2caf"),d=a("ade3"),y=a("dc03"),p=a("6c77"),m=a("83a6"),v=a("ce2c"),w=a("8682"),b=a("3e6b"),g=a("5831"),k=a("4cdf"),O=a("ca42"),_={1:"#bd2130",2:"#ffc107",3:"#2461a3"},S=function(e){Object(f["a"])(a,e);var t=Object(h["a"])(a);function a(){var e;Object(l["a"])(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i)),Object(d["a"])(Object(u["a"])(e),"_flashLayer",null),e}return Object(s["a"])(a,[{key:"setData",value:function(e){var t=this;if(this._loadData(e),this.options.showAnimaion){if(!this._flashLayer){this._createFlashLayer();var a=this._flashLayer.getSource();a.on("addfeature",(function(e){t._flash(e.feature)}))}this._startAnimation()}}},{key:"_styleFunc",value:function(e){var t=e.getGeometry().getType(),a=_[e.get("level")||3];return"Point"===t?this._createPointStyle({size:5,fillColor:a,strokeColor:"#ccc",strokeWidth:1}):"Polygon"===t?new p["c"]({fill:new m["a"]({color:a}),style:new p["c"]({color:"#ccc",width:2})}):void 0}},{key:"_createPointStyle",value:function(e){return new p["c"]({image:new v["a"]({radius:e.size,fill:new m["a"]({color:e.fillColor}),stroke:new w["a"]({color:e.strokeColor,width:e.strokeWidth})})})}},{key:"_createFlashLayer",value:function(){this._flashLayer=new b["a"]({source:new g["a"]}),this.mapObj.getOlMap().addLayer(this._flashLayer)}},{key:"_startAnimation",value:function(){var e=this.oLayer.getSource().getFeatures(),t=[];if(e.forEach((function(e){var a=e.getGeometry();if(a.getInteriorPoint){var n=a.getInteriorPoint(),i=new k["a"]({geometry:n});i.setProperties({time:0}),t.push(i)}})),0!==t.length)var a=this._flashLayer.getSource(),n=0,i=setInterval((function(){n===t.length?clearInterval(i):(a.addFeature(t[n]),n++)}),1e3)}},{key:"_flash",value:function(e){var t=this.mapObj.getOlMap(),a=Date.now(),n=(e.getGeometry().clone(),t.on("postrender",i),3e4);function i(i){var r=i.frameState,c=r.time-a;if(c>=n)a+=n;else{var o=c/n,l=25*Object(O["b"])(o)+5,s=Object(O["b"])(1-o),u=new p["c"]({image:new v["a"]({radius:l,stroke:new w["a"]({color:"rgba(255, 0, 0, "+s+")",width:.25+s})})});e.setStyle(u),t.render()}}}}]),a}(y["a"]),j=S,L=a("fc7d"),C=a("6cbf"),x={data:function(){return{layers:[{name:"hsjcd",label:"核酸检测点",checked:!1,children:[{name:"zfjcd",label:"自费检测点",checked:!0,layerOption:{type:"point",dataSource:{api:"getZfStation"},style:"zfjcd"}},{name:"mfjcd",label:"免费检测点",checked:!1,layerOption:{type:"point",dataSource:{api:"getFreeCheckPoint",type:"pointList"},style:"mfjcd"}}]},{name:"ymjzd",label:"疫苗接种点",checked:!1,layerOption:{type:"point",dataSource:{api:"getStation"},style:"point"}},{name:"fyq",label:"风险区",checked:!1,children:[{name:"gfxq",label:"高风险区",checked:!1,layerOption:{type:"fxqLayer",showAnimaion:!0,dataSource:{api:""},style:"fxq"}},{name:"gfxq",label:"中风险区",checked:!1,layerOption:{type:"fxqLayer",showAnimaion:!0,dataSource:{api:"getFxq"}}},{name:"gfxq",label:"低风险区",checked:!1,layerOption:{type:"fxqLayer",showAnimaion:!0,dataSource:{api:"getStation"},style:"fxq"}}]}]}},inject:["getMap"],mounted:function(){this.init()},methods:{init:function(){var e=this,t=[];this.layers.forEach((function(e){t.push(e),e.children&&(t=t.concat(e.children))})),t.forEach((function(t){if(Object.prototype.hasOwnProperty.call(t,"layerOption")&&t.checked&&t.layerOption){var a=e.createLayer(t.layerOption,t.name);t.layer=a,t.layerOption.dataSource&&e.loadData(t.layerOption.dataSource,a)}}))},createLayer:function(e,t){var a={point:o["a"],fxqLayer:j},n=this.getMap(),i=a[e.type];if(i){var r=new i({mapObj:n,name:t,styleFunc:e.style?this.getStyle(e.style):void 0,showAnimaion:e.showAnimaion});return r}return null},layerGroupChange:function(e){var t=this;e.checked=!e.checked,e.children&&e.children.forEach((function(a){t.layerChange(a,e.checked)}))},layerChange:function(e,t){e.checked=void 0!==t?t:!e.checked,e.layer?e.layer.setVisible(e.checked):e.checked&&(e.layer=this.createLayer(e.layerOption,e.name),this.loadData(e.layerOption.dataSource,e.layer))},loadData:function(e,t){if(e.api&&t){var a=this.$api[e.api];a&&a().then((function(a){var n;n="pointList"===e.type?L["a"].dataListToPointsFeature(a,"longitude","latitude"):L["a"].readGeoJSON(a.data),t.setData(n)}))}},getStyle:function(e){var t=function(e){var t=new p["c"]({image:new C["a"]({anchor:[.5,.5],src:e})});return t},a={point:function(e){return new p["c"]({image:new v["a"]({radius:5,fill:new m["a"]({color:"#fff"})})})},zfjcd:function(e){var a="./image/pa_f.png";return t(a)},mfjcd:function(e){var a="./image/checkpoint_open.png";return t(a)},fxq:function(e){var t=e.get("level"),a={1:"red",2:"#e3ef2e",3:"#8f8080"};return new p["c"]({fill:new m["a"]({color:a[t]||"#8f8080"}),style:new p["c"]({color:"#ccc",width:2})})}};if(a[e])return a[e]}}},q=x,P=(a("5c87"),a("2877")),A=Object(P["a"])(q,r,c,!1,null,"6502c6f0",null),F=A.exports,z=a("557c"),D={data:function(){return{mapObj:null,input:"",showLayerSwith:!1}},components:{LayerSelector:F},provide:function(){var e=this;return{getMap:function(){return e.mapObj}}},mounted:function(){this.init()},methods:{init:function(){this.mapObj=new z["a"]({target:"map",center:[114.21923,22.717446],zoom:16})}}},E=D,G=(a("7774"),Object(P["a"])(E,n,i,!1,null,"67e26b28",null));t["default"]=G.exports},"5c87":function(e,t,a){"use strict";a("bf1b")},7774:function(e,t,a){"use strict";a("0ac2")},bf1b:function(e,t,a){}}]);
//# sourceMappingURL=city.64413d0e.js.map