(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2bea83e2"],{"1ef6":function(e,a,t){},"50e8":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-tabs",{staticClass:"tabs",attrs:{type:"border-card"},model:{value:e.curTabPane,callback:function(a){e.curTabPane=a},expression:"curTabPane"}},e._l(e.chartList,(function(a){return t("el-tab-pane",{key:a.code,attrs:{label:a.label,name:a.code}},[e.curTabPane===a.code?t("div",[t("div",{staticClass:"chart-header"},[t("span",{staticClass:"text"},[e._v("时间范围")]),t("el-select",{attrs:{placeholder:"",size:"small"},on:{change:e.typeChangeHandle},model:{value:e.typeValue,callback:function(a){e.typeValue=a},expression:"typeValue"}},e._l(e.totalTypeList,(function(e){return t("el-option",{key:e.code,attrs:{label:e.label,value:e.code}})})),1),t("div",["custom"===e.typeValue?t("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small"},on:{change:e.dataRangeChanged},model:{value:e.dateRange,callback:function(a){e.dateRange=a},expression:"dateRange"}}):e._e()],1)],1),t("BaseBar",{staticClass:"chart-container",attrs:{group:a.group,title:e.title}})],1):e._e()])})),1)],1)},n=[],l=t("b85c"),i=t("3835"),o=(t("7db0"),t("d3b7"),t("159b"),t("4ec9"),t("3ca3"),t("ddb0"),t("d81d"),t("ac1f"),t("00b4"),t("c1df")),c=t.n(o),s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div")},u=[],d=t("22b4"),h=t("1be7"),p=t("9394"),f=t("2da7"),b=t("4b2a"),g=t("4cb5"),v=t("f95e");d["a"]([p["a"],f["a"],b["a"],g["a"],v["a"]]);var y={data:function(){return{chart:null}},props:{group:{type:Array},title:{type:String}},watch:{group:function(e){this.showChart(e)}},mounted:function(){this.showChart()},methods:{showChart:function(){this.chart||(this.chart=h["b"](this.$el));var e=[],a=[];this.group.forEach((function(t){e.push(t[0]),a.push(t[1])}));var t={title:{text:this.title},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:e},yAxis:{type:"value"},series:[{data:a,type:"bar",barWidth:"30",itemStyle:{borderColor:"transparent",color:"rgb(145 204 117)"}}]};this.chart.setOption(t)}}},m=y,w=t("2877"),x=Object(w["a"])(m,s,u,!1,null,"1e38ab04",null),C=x.exports,k=t("fc7d"),R=t("343d"),A={components:{BaseBar:C},mixins:[R["a"]],data:function(){return{chartList:[{code:"age",label:"按年龄",group:[],groupMap:k["a"].covidDataUtil.ageGroup1,formatValue:this.formatAge},{code:"sex",label:"按性别",group:[],groupMap:[{id:1,label:"男",value:"男"},{id:2,label:"女",value:"女"}]},{code:"address",label:"按区域",group:[],groupMap:[{id:1,label:"福田区",value:""},{id:2,label:"南山区",value:""},{id:3,label:"宝安区",value:""},{id:4,label:"罗湖区",value:""},{id:5,label:"龙岗区",value:""},{id:6,label:"坪山区",value:""},{id:7,label:"龙华区",value:""},{id:8,label:"大鹏新区",value:""},{id:9,label:"坪山新区",value:""},{id:10,label:"光明新区",value:""}],formatValue:this.formatRegion}],curTabPane:"age",typeValue:"day",title:"",dateRangeOptions:[],dateRange:""}},props:{data:{type:Array}},watch:{curTabPane:function(e){this.showChart()}},mounted:function(){this.showChart()},methods:{showChart:function(){var e=this,a=this.chartList.find((function(a){return a.code===e.curTabPane}));if(a){var t,r,n=this.totalTypeList.find((function(a){return a.code===e.typeValue}));if("custom"===n.code){var l=Object(i["a"])(this.dateRange,2);t=l[0],r=l[1]}else r=c()(),t=c()().subtract(n.value,"day");var o=this.filterMapDataByDateRange(t,r,this.data),s=this.createGroupByAge(o,a.code,a.groupMap,a.formatValue);a.group=s,this.title="确诊人数："+o.length}},group:function(e,a){var t={};return e.forEach((function(e){var r=e[a];t[r]?t[r]+=1:t[r]=1})),t},typeChangeHandle:function(e){this.showChart()},createGroupByAge:function(e,a,t,r){var n=new Map;e.forEach((function(e){var i=e[a],o=r?r(i):i,c="";if(t){var s,u=Object(l["a"])(t);try{for(u.s();!(s=u.n()).done;){var d=s.value,h=d.id;if(h){var p=d.limit,f=d.value||d.label;if(Array.isArray(p)&&2===p.length){var b=parseInt(o);if("number"===typeof b&&b>p[0]&&b<=p[1]){c=h;break}}else if(f===o){c=h;break}}}}catch(v){u.e(v)}finally{u.f()}if(c){var g=n.get(c);g=g?g+1:1,n.set(c,g)}}}));var i=t.map((function(e){var a=e.label,t=n.get(e.id)||0;return[a,t]}));return i},formatAge:function(e){var a=/^\d+(?=月龄$)/,t=/^\d+(?=岁)/;return a.test(e)?a.exec(e)[0]:t.test(e)?t.exec(e)[0]:""},formatRegion:function(e){var a=/^.{2,}(?=区)/;return a.test(e)?a.exec(e)[0]+"区":""},dataRangeChanged:function(){this.showChart()}}},T=A,V=(t("fc33"),Object(w["a"])(T,r,n,!1,null,"956c4490",null));a["default"]=V.exports},fc33:function(e,a,t){"use strict";t("1ef6")}}]);
//# sourceMappingURL=chunk-2bea83e2.86db49dc.js.map