(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f0bc03a"],{3824:function(t,e,a){"use strict";a("64ca")},"64ca":function(t,e,a){},c16c:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("div",{staticClass:"setting-wrap box"},[a("RegionSelector",{staticClass:"setting-item region-selector",on:{change:t.regionChangeHandle}}),a("DataTypeSelector",{staticClass:"setting-item",attrs:{label:"类型"},on:{change:t.dataTypeChangeHandle}}),a("div",{staticClass:"setting-item"},[a("span",{staticClass:"col-label"},[t._v("开始时间")]),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},on:{change:t.dateChangeHandle},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),t.lineRachChartOptions.renderData.length>0?a("LineRace",{key:this.lineChartKey,staticClass:"chart box",attrs:{options:t.lineRachChartOptions,renderData:t.lineRachChartOptions.renderData,title:t.lineRachChartOptions.title}}):t._e()],1)},i=[],r=(a("ac1f"),a("1276"),a("d3b7"),a("159b"),a("7db0"),a("99af"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")}),s=[],o=(a("c740"),a("22b4")),l=a("1be7"),c=a("c32b"),h=a("5e81"),u=a("9394"),d=a("2da7"),p=a("4b2a"),f=a("e600"),m=a("3620"),v=a("ee29"),g=a("c55a"),C=a("f95e");o["a"]([h["a"],u["a"],d["a"],p["a"],f["a"],m["a"],C["a"],v["a"],g["a"]]);var y={props:{renderData:{type:Array,required:!0},title:{type:String},options:{type:Object,required:!0,validator:function(t){for(var e=["startDate","countries","countryColName","dateColName","dataItemName"],a=0,n=e;a<n.length;a++){var i=n[a];if(!t[i])return!1}return!0}}},mounted:function(){this.init()},methods:{init:function(){var t=this.$el,e=l["b"](t),a=this.getOptions(this.renderData);e.setOption(a),this.chart=e},getOptions:function(t){var e=this.options.countries,a=this.options.startDate,n=this.options.countryColName,i=this.options.dateColName,r=this.options.dataItemName,s=t[0].findIndex((function(t){return t===n})),o=t[0].findIndex((function(t){return t===r})),l=[],h=[];c["a"].each(e,(function(t){var e="dataset_"+t;l.push({id:e,fromDatasetId:"dataset_raw",transform:{type:"filter",config:{and:[{dimension:i,gte:a,parser:"time"},{dimension:n,"=":t}]}}}),h.push({type:"line",datasetId:e,showSymbol:!1,name:t,endLabel:{show:!0,formatter:function(t){return t.value[s]+": "+t.value[o]}},labelLayout:{moveOverlap:"shiftY"},emphasis:{focus:"series"},encode:{x:i,y:r,label:[n,r],itemName:i,tooltip:[r]}})}));var u={animationDuration:5e3,dataset:[{id:"dataset_raw",source:t}].concat(l),title:{text:this.title},tooltip:{order:"valueDesc",trigger:"axis"},xAxis:{type:"category",nameLocation:"middle"},yAxis:{name:r},grid:{right:140},series:h};return u}}},b=y,D=a("2877"),O=Object(D["a"])(b,r,s,!1,null,"526934d2",null),R=O.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span",{staticClass:"col-label"},[t._v("城市")]),a("el-cascader",{attrs:{options:t.options,props:t.props,clearable:"","collapse-tags":"",filterable:""},on:{change:t.changeHandle}})],1)},x=[],N=(a("4de4"),a("d81d"),{data:function(){return{props:{multiple:!0,value:"code",label:"value",checkStrictly:!0},options:[]}},mounted:function(){this.getRegions()},methods:{getRegions:function(){var t=this;this.$api.getRegionData().then((function(e){var a=e.data;t.options=a.filter((function(t){return"CN"===t.code}))}))},changeHandle:function(t){var e=this,a=t.map((function(t){var a=t.reduce((function(t,e,a,n){var i=t.find((function(t){return t.code===e}));return a===n.length-1?i:i.children}),e.options);return a.value}));this.$emit("change",a)}}}),w=N,T=Object(D["a"])(w,_,x,!1,null,"95472a78",null),I=T.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span",{staticClass:"col-label"},[t._v(t._s(t.label))]),a("el-select",{attrs:{placeholder:""},on:{change:function(e){return t.$emit("change",e)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)},L=[],S=a("fc7d"),$={data:function(){return{options:S["a"].covidDataUtil.covidDataTypeList,value:"confirmed"}},props:{label:{type:String},dataType:{type:String,default:"confirmed"}},created:function(){this.value=this.dataType}},H=$,E=Object(D["a"])(H,k,L,!1,null,"36cc80aa",null),K=E.exports,j=(a("bc3a"),{components:{LineRace:R,RegionSelector:I,DataTypeSelector:K},data:function(){return{lineRachChartOptions:{renderData:[],countries:["武汉市","深圳市","广州市","黄冈市"],startDate:"2020-02-14",countryColName:"city",dateColName:"date",dataItemName:"",title:""},startDate:"2020-02-14",cvData:null,lineChartKey:0}},mounted:function(){var t=this;this.getData().then((function(e){t.cvData=e,t.showLineRaceChart(e)}))},methods:{getData:function(){return this.$api.getCovidData().then((function(t){var e=t.data.split("\r\n"),a=[];return e.forEach((function(t,e){var n=t.split(",");0===e?a.push(n):n[6]&&([7,8,9,10].forEach((function(t){n[t]=parseInt(n[t])})),a.push(n))})),a}))},showLineRaceChart:function(){this.lineRachChartOptions.startDate="2020-02-14",this.lineRachChartOptions.countryColName="city",this.lineRachChartOptions.dateColName="date",this.lineRachChartOptions.dataItemName="confirmed",this.lineRachChartOptions.title="增长",this.lineRachChartOptions.renderData=this.cvData,this.lineChartKey+=1},regionChangeHandle:function(t){this.lineRachChartOptions.countries=t,this.lineRachChartOptions.title=this.getTitle(),this.lineChartKey+=1},dataTypeChangeHandle:function(t){this.lineRachChartOptions.dataItemName=t,this.lineRachChartOptions.title=this.getTitle(),this.lineChartKey+=1},dateChangeHandle:function(t){this.lineRachChartOptions.startDate=t,this.lineRachChartOptions.title=this.getTitle(),this.lineChartKey+=1},getTitle:function(){var t=this,e=S["a"].covidDataUtil.covidDataTypeList.find((function(e){return e.value===t.lineRachChartOptions.dataItemName}));return"自 ".concat(this.lineRachChartOptions.startDate," 以来的 ").concat(e.label," 数据")}}}),A=j,q=(a("3824"),Object(D["a"])(A,n,i,!1,null,"28aeefdb",null));e["default"]=q.exports}}]);
//# sourceMappingURL=chunk-7f0bc03a.95407152.js.map