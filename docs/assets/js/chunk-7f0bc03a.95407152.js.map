{"version":3,"sources":["webpack:///./src/views/data/IncreaseChart.vue?2875","webpack:///./src/views/data/IncreaseChart.vue?e4e0","webpack:///./src/components/charts/LineRace.vue?333f","webpack:///src/components/charts/LineRace.vue","webpack:///./src/components/charts/LineRace.vue?4fdc","webpack:///./src/components/charts/LineRace.vue","webpack:///./src/components/RegionSelector.vue?7799","webpack:///src/components/RegionSelector.vue","webpack:///./src/components/RegionSelector.vue?dfc6","webpack:///./src/components/RegionSelector.vue","webpack:///./src/components/DataTypeSelector.vue?fc9a","webpack:///src/components/DataTypeSelector.vue","webpack:///./src/components/DataTypeSelector.vue?d85e","webpack:///./src/components/DataTypeSelector.vue","webpack:///src/views/data/IncreaseChart.vue","webpack:///./src/views/data/IncreaseChart.vue?6803","webpack:///./src/views/data/IncreaseChart.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","regionChangeHandle","attrs","dataTypeChangeHandle","_v","dateChangeHandle","model","value","callback","$$v","startDate","expression","lineRachChartOptions","renderData","length","key","lineChartKey","title","_e","staticRenderFns","echarts","DatasetComponent","TitleComponent","TooltipComponent","GridComponent","TransformComponent","LineChart","CanvasRenderer","LabelLayout","UniversalTransition","props","type","required","options","validator","k","mounted","init","methods","chartDom","$el","myChart","chart","getOptions","data","datasetId","country","datasetWithFilters","id","fromDatasetId","transform","config","and","dimension","gte","parser","seriesList","showSymbol","name","endLabel","show","formatter","params","countryIndex","dataIndex","labelLayout","moveOverlap","emphasis","focus","encode","x","y","label","itemName","tooltip","animationDuration","dataset","source","text","order","trigger","xAxis","nameLocation","yAxis","grid","right","series","option","component","changeHandle","multiple","checkStrictly","getRegions","$api","getRegionData","then","nodes","index","arr","t","children","node","$emit","_s","$event","_l","item","i","dataType","default","created","components","LineRace","RegionSelector","DataTypeSelector","countries","countryColName","dateColName","dataItemName","cvData","getData","getCovidData","lines","values","forEach","showLineRaceChart","getTitle","date"],"mappings":"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","file":"assets/js/chunk-7f0bc03a.95407152.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IncreaseChart.vue?vue&type=style&index=0&id=28aeefdb&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('div',{staticClass:\"setting-wrap box\"},[_c('RegionSelector',{staticClass:\"setting-item region-selector\",on:{\"change\":_vm.regionChangeHandle}}),_c('DataTypeSelector',{staticClass:\"setting-item\",attrs:{\"label\":\"类型\"},on:{\"change\":_vm.dataTypeChangeHandle}}),_c('div',{staticClass:\"setting-item\"},[_c('span',{staticClass:\"col-label\"},[_vm._v(\"开始时间\")]),_c('el-date-picker',{attrs:{\"value-format\":\"yyyy-MM-dd\",\"type\":\"date\",\"placeholder\":\"选择日期\"},on:{\"change\":_vm.dateChangeHandle},model:{value:(_vm.startDate),callback:function ($$v) {_vm.startDate=$$v},expression:\"startDate\"}})],1)],1),(_vm.lineRachChartOptions.renderData.length > 0)?_c('LineRace',{key:this.lineChartKey,staticClass:\"chart box\",attrs:{\"options\":_vm.lineRachChartOptions,\"renderData\":_vm.lineRachChartOptions.renderData,\"title\":_vm.lineRachChartOptions.title}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div')}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- 动态排序折线图 -->\r\n  <div></div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from 'echarts/core'\r\nimport {\r\n  DatasetComponent,\r\n  TitleComponent,\r\n  TooltipComponent,\r\n  GridComponent,\r\n  TransformComponent\r\n} from 'echarts/components'\r\nimport { LineChart } from 'echarts/charts'\r\nimport { LabelLayout, UniversalTransition } from 'echarts/features'\r\nimport { CanvasRenderer } from 'echarts/renderers'\r\n\r\necharts.use([\r\n  DatasetComponent,\r\n  TitleComponent,\r\n  TooltipComponent,\r\n  GridComponent,\r\n  TransformComponent,\r\n  LineChart,\r\n  CanvasRenderer,\r\n  LabelLayout,\r\n  UniversalTransition\r\n])\r\nexport default {\r\n  props: {\r\n    renderData: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    title: {\r\n      type: String\r\n    },\r\n    options: {\r\n      type: Object,\r\n      required: true,\r\n      validator: (value) => {\r\n        const keys = ['startDate', 'countries', 'countryColName', 'dateColName', 'dataItemName']\r\n        for (const k of keys) {\r\n          if (!value[k]) {\r\n            return false\r\n          }\r\n        }\r\n        return true\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    init () {\r\n      var chartDom = this.$el\r\n      var myChart = echarts.init(chartDom)\r\n      const option = this.getOptions(this.renderData)\r\n      myChart.setOption(option)\r\n      this.chart = myChart\r\n    },\r\n    getOptions (data) {\r\n      const countries = this.options.countries\r\n      const startDate = this.options.startDate\r\n      const countryName = this.options.countryColName\r\n      const dateName = this.options.dateColName\r\n      const renderDataName = this.options.dataItemName\r\n\r\n      const countryIndex = data[0].findIndex((i) => i === countryName) // TODO 待优化\r\n      const dataIndex = data[0].findIndex((i) => i === renderDataName)\r\n\r\n      const datasetWithFilters = []\r\n      const seriesList = []\r\n      echarts.util.each(countries, function (country) {\r\n        var datasetId = 'dataset_' + country\r\n        datasetWithFilters.push({\r\n          id: datasetId,\r\n          fromDatasetId: 'dataset_raw',\r\n          transform: {\r\n            type: 'filter',\r\n            config: {\r\n              and: [\r\n                { dimension: dateName, gte: startDate, parser: 'time' },\r\n                { dimension: countryName, '=': country }\r\n              ]\r\n            }\r\n          }\r\n        })\r\n        seriesList.push({\r\n          type: 'line',\r\n          datasetId: datasetId,\r\n          showSymbol: false,\r\n          name: country,\r\n          endLabel: {\r\n            show: true,\r\n            formatter: function (params) {\r\n              // return params.value[3] + ': ' + params.value[0]\r\n              return params.value[countryIndex] + ': ' + params.value[dataIndex]\r\n            }\r\n          },\r\n          labelLayout: {\r\n            moveOverlap: 'shiftY'\r\n          },\r\n          emphasis: {\r\n            focus: 'series'\r\n          },\r\n          encode: {\r\n            x: dateName,\r\n            y: renderDataName,\r\n            label: [countryName, renderDataName],\r\n            itemName: dateName,\r\n            tooltip: [renderDataName]\r\n          }\r\n        })\r\n      })\r\n      const option = {\r\n        animationDuration: 5000, // 播放时长\r\n        dataset: [\r\n          {\r\n            id: 'dataset_raw', // 对应datasetWithFilters 项中的 fromDatasetId\r\n            source: data\r\n          },\r\n          ...datasetWithFilters\r\n        ],\r\n        title: {\r\n          text: this.title\r\n        },\r\n        tooltip: {\r\n          order: 'valueDesc',\r\n          trigger: 'axis'\r\n        },\r\n        xAxis: {\r\n          type: 'category',\r\n          nameLocation: 'middle'\r\n        },\r\n        yAxis: {\r\n          name: renderDataName\r\n        },\r\n        grid: {\r\n          right: 140\r\n        },\r\n        series: seriesList\r\n      }\r\n      return option\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LineRace.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LineRace.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LineRace.vue?vue&type=template&id=526934d2&scoped=true&\"\nimport script from \"./LineRace.vue?vue&type=script&lang=js&\"\nexport * from \"./LineRace.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"526934d2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('span',{staticClass:\"col-label\"},[_vm._v(\"城市\")]),_c('el-cascader',{attrs:{\"options\":_vm.options,\"props\":_vm.props,\"clearable\":\"\",\"collapse-tags\":\"\",\"filterable\":\"\"},on:{\"change\":_vm.changeHandle}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <span class=\"col-label\">城市</span>\r\n    <el-cascader\r\n      :options=\"options\"\r\n      :props=\"props\"\r\n      clearable\r\n      collapse-tags\r\n      filterable\r\n      @change=\"changeHandle\"></el-cascader>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      props: { multiple: true, value: 'code', label: 'value', checkStrictly: true },\r\n      options: []\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getRegions()\r\n  },\r\n  methods: {\r\n    getRegions () {\r\n      this.$api.getRegionData().then((res) => {\r\n        const data = res.data\r\n        this.options = data.filter((item) => item.code === 'CN')\r\n      })\r\n    },\r\n    changeHandle (nodes) {\r\n      const data = nodes.map((item) => {\r\n        const node = item.reduce((prev, cur, index, arr) => {\r\n          const t = prev.find((c) => c.code === cur)\r\n          if (index === arr.length - 1) {\r\n            return t\r\n          }\r\n          return t.children\r\n        }, this.options)\r\n        return node.value\r\n      })\r\n      this.$emit('change', data)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegionSelector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegionSelector.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RegionSelector.vue?vue&type=template&id=95472a78&scoped=true&\"\nimport script from \"./RegionSelector.vue?vue&type=script&lang=js&\"\nexport * from \"./RegionSelector.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"95472a78\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('span',{staticClass:\"col-label\"},[_vm._v(_vm._s(_vm.label))]),_c('el-select',{attrs:{\"placeholder\":\"\"},on:{\"change\":function($event){return _vm.$emit('change', $event)}},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},_vm._l((_vm.options),function(item,i){return _c('el-option',{key:i,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <span class=\"col-label\">{{label}}</span>\r\n    <el-select v-model=\"value\" placeholder=\"\" @change=\"$emit('change', $event)\">\r\n      <el-option v-for=\"(item, i) in options\" :key=\"i\" :label=\"item.label\" :value=\"item.value\"></el-option>\r\n    </el-select>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport mapUtil from '../utils/mapUtil'\r\nexport default {\r\n  data () {\r\n    return {\r\n      options: mapUtil.covidDataUtil.covidDataTypeList,\r\n      value: 'confirmed'\r\n    }\r\n  },\r\n  props: {\r\n    label: {\r\n      type: String\r\n    },\r\n    dataType: {\r\n      type: String,\r\n      default: 'confirmed'\r\n    }\r\n  },\r\n  created () {\r\n    this.value = this.dataType\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataTypeSelector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataTypeSelector.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DataTypeSelector.vue?vue&type=template&id=36cc80aa&scoped=true&\"\nimport script from \"./DataTypeSelector.vue?vue&type=script&lang=js&\"\nexport * from \"./DataTypeSelector.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"36cc80aa\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"wrap\">\r\n    <div class=\"setting-wrap box\">\r\n      <!-- 区域选择器 -->\r\n      <RegionSelector @change=\"regionChangeHandle\" class=\"setting-item region-selector\"></RegionSelector>\r\n      <!-- 列选择器 -->\r\n      <DataTypeSelector label=\"类型\" @change=\"dataTypeChangeHandle\" class=\"setting-item\"></DataTypeSelector>\r\n      <div class=\"setting-item\">\r\n        <span class=\"col-label\">开始时间</span>\r\n        <el-date-picker\r\n          v-model=\"startDate\"\r\n          @change=\"dateChangeHandle\"\r\n          value-format=\"yyyy-MM-dd\"\r\n          type=\"date\"\r\n          placeholder=\"选择日期\">\r\n        </el-date-picker>\r\n      </div>\r\n    </div>\r\n    <LineRace\r\n      v-if=\"lineRachChartOptions.renderData.length > 0\"\r\n      :options=\"lineRachChartOptions\"\r\n      :renderData=\"lineRachChartOptions.renderData\"\r\n      :title=\"lineRachChartOptions.title\"\r\n      class=\"chart box\"\r\n      :key=\"this.lineChartKey\"\r\n    ></LineRace>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport LineRace from '../../components/charts/LineRace.vue'\r\nimport RegionSelector from '../../components/RegionSelector.vue'\r\nimport DataTypeSelector from '../../components/DataTypeSelector.vue'\r\nimport axios from 'axios'\r\nimport mapUtil from '../../utils/mapUtil'\r\nexport default {\r\n  components: {\r\n    LineRace,\r\n    RegionSelector,\r\n    DataTypeSelector\r\n  },\r\n  data () {\r\n    return {\r\n      lineRachChartOptions: {\r\n        renderData: [],\r\n        countries: [\r\n          '武汉市',\r\n          '深圳市',\r\n          '广州市',\r\n          '黄冈市'\r\n        ],\r\n        startDate: '2020-02-14',\r\n        countryColName: 'city',\r\n        dateColName: 'date',\r\n        dataItemName: '',\r\n        title: ''\r\n      },\r\n      startDate: '2020-02-14',\r\n      cvData: null,\r\n      lineChartKey: 0\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getData().then((data) => {\r\n      this.cvData = data\r\n      this.showLineRaceChart(data)\r\n    })\r\n  },\r\n  methods: {\r\n    getData () {\r\n      return this.$api.getCovidData().then((csvData) => {\r\n        const lines = csvData.data.split('\\r\\n')\r\n        const data = []\r\n        lines.forEach((line, index) => {\r\n          const values = line.split(',')\r\n          if (index === 0) {\r\n            data.push(values)\r\n          } else {\r\n            // 过滤出带城市的数据\r\n            if (values[6]) {\r\n              [7, 8, 9, 10].forEach((i) => {\r\n                values[i] = parseInt(values[i])\r\n              })\r\n              data.push(values)\r\n            }\r\n          }\r\n        })\r\n        return data\r\n      })\r\n    },\r\n    showLineRaceChart () {\r\n      this.lineRachChartOptions.startDate = '2020-02-14'\r\n      this.lineRachChartOptions.countryColName = 'city'\r\n      this.lineRachChartOptions.dateColName = 'date'\r\n      this.lineRachChartOptions.dataItemName = 'confirmed'\r\n      this.lineRachChartOptions.title = '增长'\r\n      this.lineRachChartOptions.renderData = this.cvData\r\n      this.lineChartKey += 1\r\n    },\r\n    regionChangeHandle (data) {\r\n      this.lineRachChartOptions.countries = data\r\n      this.lineRachChartOptions.title = this.getTitle()\r\n      this.lineChartKey += 1\r\n    },\r\n    dataTypeChangeHandle (dataType) {\r\n      this.lineRachChartOptions.dataItemName = dataType\r\n      this.lineRachChartOptions.title = this.getTitle()\r\n      this.lineChartKey += 1\r\n    },\r\n    dateChangeHandle (date) {\r\n      this.lineRachChartOptions.startDate = date\r\n      this.lineRachChartOptions.title = this.getTitle()\r\n      this.lineChartKey += 1\r\n    },\r\n    getTitle () {\r\n      const dataType = mapUtil.covidDataUtil.covidDataTypeList.find((item) => item.value === this.lineRachChartOptions.dataItemName)\r\n      return `自 ${this.lineRachChartOptions.startDate} 以来的 ${dataType.label} 数据`\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .wrap{\r\n    margin: .5rem;\r\n    min-height:  calc(100vh - 30px);\r\n    color: black;\r\n    border-radius: 5px;\r\n    .box {\r\n      border-radius: 5px;\r\n      background-color: white;\r\n    }\r\n    .setting-wrap{\r\n      display: flex;\r\n      background-color: #2196f30d;\r\n      .setting-item{\r\n        margin: 0 1rem;\r\n      }\r\n      .region-selector{\r\n        /deep/ .el-cascader{\r\n          width: 20rem;\r\n        }\r\n      }\r\n    }\r\n    .chart{\r\n      height: 600px;\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IncreaseChart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IncreaseChart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./IncreaseChart.vue?vue&type=template&id=28aeefdb&scoped=true&\"\nimport script from \"./IncreaseChart.vue?vue&type=script&lang=js&\"\nexport * from \"./IncreaseChart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./IncreaseChart.vue?vue&type=style&index=0&id=28aeefdb&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28aeefdb\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}