{"version":3,"sources":["webpack:///./src/views/shenzhen/Index.vue?9796","webpack:///./src/components/Map.vue?6d27","webpack:///src/components/Map.vue","webpack:///./src/components/Map.vue?3ee7","webpack:///./src/components/Map.vue","webpack:///src/views/shenzhen/Index.vue","webpack:///./src/views/shenzhen/Index.vue?a949","webpack:///./src/views/shenzhen/Index.vue","webpack:///./src/views/shenzhen/mixin.js","webpack:///./src/views/shenzhen/Index.vue?0c3e","webpack:///./src/components/Map.vue?8e30"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","model","value","callback","$$v","input","expression","slot","on","changeTotalType","_v","_s","totalType","label","$event","showChartHandle","showTimeLineHandle","directives","name","rawName","code","dataRangeChanged","dateRange","ref","mapCenter","showChart","szyqData","_e","handleDateChange","staticRenderFns","props","center","type","default","zoom","data","mapObj","mounted","init","methods","target","component","components","Map","DistributionChart","TrendChart","TimeLine","mixins","heatlayer","totalIndex","showTimeLine","computed","totalTypeList","watch","val","changeMapData","getData","$api","getSzyzData","then","showHeatmap","amap","createHeatmap","Feature","geometry","source","blur","radius","weight","layer","length","opt","start","end","cmd","chartType","personCategory","filterMapDataBySubDate","sub","Array","isArray","endDate","moment","subtract","targetData","filter","item","dataDate","date","isAfter","filterMapDataByDateRange","startDate","endDete","isBetween"],"mappings":"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","file":"assets/js/chunk-2e2c3497.ed460580.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"search_wrap\"},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"请输入内容\"},model:{value:(_vm.input),callback:function ($$v) {_vm.input=$$v},expression:\"input\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},slot:\"append\"})],1)],1),_c('div',{staticClass:\"layer_wrap\"},[_c('div',{staticClass:\"selector_wrap\"},[_c('div',{staticClass:\"layer_item\",on:{\"click\":_vm.changeTotalType}},[_vm._v(_vm._s(_vm.totalType.label))]),_c('div',{staticClass:\"layer_item\",on:{\"click\":function($event){return _vm.showChartHandle(0)}}},[_vm._v(\"分布图\")]),_c('div',{staticClass:\"layer_item last_item\",on:{\"click\":function($event){return _vm.showChartHandle(1)}}},[_vm._v(\"趋势图\")]),_c('div',{staticClass:\"layer_item last_item\",on:{\"click\":_vm.showTimeLineHandle}},[_vm._v(\"时间轴\")])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.totalType.code === 'custom'),expression:\"totalType.code === 'custom'\"}],staticClass:\"date_picker\"},[_c('el-date-picker',{attrs:{\"type\":\"daterange\",\"align\":\"right\",\"unlink-panels\":\"\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"size\":\"small\"},on:{\"change\":_vm.dataRangeChanged},model:{value:(_vm.dateRange),callback:function ($$v) {_vm.dateRange=$$v},expression:\"dateRange\"}})],1)]),_c('Map',{ref:\"map\",attrs:{\"center\":_vm.mapCenter}}),_c('div',{staticClass:\"chart_wrap\"},[_c('transition',{attrs:{\"name\":\"chart\",\"mode\":\"out-in\"}},[(_vm.showChart === 'distributionChart')?_c('DistributionChart',{attrs:{\"data\":_vm.szyqData}}):(_vm.showChart === 'trendChart')?_c('TrendChart',{attrs:{\"data\":_vm.szyqData}}):_vm._e()],1)],1),(_vm.showTimeLine)?_c('TimeLine',{staticClass:\"timeline-container\",attrs:{\"startDate\":\"2022-03-01\",\"speed\":1},on:{\"changeDate\":_vm.handleDateChange}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"map\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"map\"></div>\r\n</template>\r\n\r\n<script>\r\nimport AMap from '../map/aMap'\r\nexport default {\r\n  props: {\r\n    center: {\r\n      type: Array,\r\n      default: function () {\r\n        return [112, 32]\r\n      }\r\n    },\r\n    zoom: {\r\n      type: Number,\r\n      default: 12\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      mapObj: undefined // 地图对象\r\n    }\r\n  },\r\n  mounted () {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    init () {\r\n      this.mapObj = new AMap({\r\n        target: 'map',\r\n        center: this.center,\r\n        zoom: this.zoom\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  @import url('~ol/ol.css');\r\n  #map{\r\n    height: 100%;\r\n    width: 100%;\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=34e941a7&scoped=true&\"\nimport script from \"./Map.vue?vue&type=script&lang=js&\"\nexport * from \"./Map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Map.vue?vue&type=style&index=0&id=34e941a7&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"34e941a7\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <div class=\"search_wrap\">\r\n      <el-input placeholder=\"请输入内容\" v-model=\"input\" class=\"input-with-select\">\r\n        <el-button slot=\"append\" icon=\"el-icon-search\"></el-button>\r\n      </el-input>\r\n    </div>\r\n    <div class=\"layer_wrap\">\r\n      <div class=\"selector_wrap\">\r\n        <div\r\n          @click=\"changeTotalType\"\r\n          class=\"layer_item\"\r\n          >{{totalType.label}}</div>\r\n        <div @click=\"showChartHandle(0)\" class=\"layer_item\">分布图</div>\r\n        <div @click=\"showChartHandle(1)\" class=\"layer_item last_item\">趋势图</div>\r\n        <div @click=\"showTimeLineHandle\" class=\"layer_item last_item\">时间轴</div>\r\n      </div>\r\n      <div v-show=\"totalType.code === 'custom'\" class=\"date_picker\">\r\n        <el-date-picker\r\n          v-model=\"dateRange\"\r\n          type=\"daterange\"\r\n          align=\"right\"\r\n          unlink-panels\r\n          range-separator=\"至\"\r\n          start-placeholder=\"开始日期\"\r\n          end-placeholder=\"结束日期\"\r\n          size=\"small\"\r\n          @change=\"dataRangeChanged\">\r\n        </el-date-picker>\r\n      </div>\r\n    </div>\r\n    <Map\r\n      :center=\"mapCenter\"\r\n      ref=\"map\">\r\n    </Map>\r\n    <div class=\"chart_wrap\">\r\n      <transition name=\"chart\" mode=\"out-in\">\r\n        <DistributionChart v-if=\"showChart === 'distributionChart'\" :data=\"szyqData\"></DistributionChart>\r\n        <TrendChart v-else-if=\"showChart === 'trendChart'\" :data=\"szyqData\"></TrendChart>\r\n      </transition>\r\n    </div>\r\n    <TimeLine\r\n      v-if=\"showTimeLine\" class=\"timeline-container\"\r\n      startDate=\"2022-03-01\"\r\n      :speed=1\r\n      @changeDate=\"handleDateChange\">\r\n    </TimeLine>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment'\r\nimport Map from 'comps/Map.vue'\r\nimport Heatmap from 'ol/layer/Heatmap'\r\nimport VectorSource from 'ol/source/Vector'\r\nimport { Feature } from 'ol'\r\nimport { Point } from 'ol/geom'\r\n// import DistributionChart from './DistributionChart.vue'\r\n// import TrendChart from './TrendChart.vue'\r\nimport mixin from './mixin'\r\n// import TimeLine from 'comps/timeLine'\r\nexport default {\r\n  components: {\r\n    Map,\r\n    DistributionChart: () => import('./DistributionChart.vue'),\r\n    TrendChart: () => import('./TrendChart.vue'),\r\n    TimeLine: () => import('comps/timeLine')\r\n  },\r\n  mixins: [mixin],\r\n  data () {\r\n    return {\r\n      szyqData: null,\r\n      heatlayer: null,\r\n      mapCenter: [114.040504, 22.553397],\r\n      totalIndex: 0,\r\n      showChart: '',\r\n      input: '',\r\n      dateRange: '',\r\n      showTimeLine: false\r\n    }\r\n  },\r\n  computed: {\r\n    totalType () {\r\n      return this.totalTypeList[this.totalIndex]\r\n    }\r\n  },\r\n  watch: {\r\n    totalIndex (val) {\r\n      this.changeMapData(val)\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getData()\r\n  },\r\n  methods: {\r\n    getData () {\r\n      this.$api.getSzyzData().then((res) => {\r\n        this.szyqData = res\r\n        if (this.$refs.map.mapObj) {\r\n          this.showHeatmap(res)\r\n        }\r\n      })\r\n    },\r\n    showHeatmap (data) {\r\n      const amap = this.$refs.map.mapObj\r\n      if (amap) {\r\n        if (this.heatlayer) {\r\n          amap.getOlMap().removeLayer(this.heatlayer)\r\n        }\r\n        this.heatlayer = this.createHeatmap()\r\n        amap.getOlMap().addLayer(this.heatlayer)\r\n        const fts = data.map((d) => {\r\n          const x = parseFloat(d.x, 10)\r\n          const y = parseFloat(d.y, 10)\r\n          return new Feature({\r\n            geometry: new Point([x, y])\r\n          })\r\n        })\r\n        const source = this.heatlayer.getSource()\r\n        source.addFeatures(fts)\r\n      }\r\n    },\r\n    createHeatmap () {\r\n      const layer = new Heatmap({\r\n        source: new VectorSource(),\r\n        blur: 7,\r\n        radius: 5,\r\n        weight: function () {\r\n          return 3\r\n        }\r\n      })\r\n      return layer\r\n    },\r\n    changeTotalType () {\r\n      this.totalIndex = this.totalIndex >= this.totalTypeList.length - 1 ? 0 : this.totalIndex + 1\r\n    },\r\n    changeMapData (val) {\r\n      // const data = this.filterMapDataBySubDate(this.totalTypeList[val].value, this.szyqData)\r\n      const opt = this.totalTypeList[this.totalIndex]\r\n      let start, end\r\n      if (opt.code === 'custom') {\r\n        [start, end] = this.dateRange\r\n      } else {\r\n        end = moment()\r\n        start = moment().subtract(opt.value, 'day')\r\n      }\r\n      const data = this.filterMapDataByDateRange(start, end, this.szyqData)\r\n      this.showHeatmap(data)\r\n    },\r\n    showChartHandle (cmd) {\r\n      const chartType = cmd === 0 ? 'distributionChart' : 'trendChart'\r\n      if (this.showChart === chartType) {\r\n        this.showChart = ''\r\n      } else {\r\n        this.showChart = chartType\r\n      }\r\n    },\r\n    dataRangeChanged () {\r\n      this.changeMapData()\r\n    },\r\n    showTimeLineHandle () {\r\n      this.showTimeLine = !this.showTimeLine\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  @topMargin:1rem;\r\n  @leftMargin: 1rem;\r\n  @border: 1px solid var(--border-color);\r\n  .search_wrap{\r\n    position: absolute;\r\n    top: @topMargin;\r\n    left: @leftMargin;\r\n    z-index: 2;\r\n    width: 30%;\r\n    /deep/ .el-input-group{\r\n      .el-input__inner{\r\n        background:#153359cf;\r\n        border: @border;\r\n        color: var(--drak-font-color);\r\n      }\r\n      .el-input-group__append{\r\n        background-color: #0d1c3bd4;\r\n        border: @border;\r\n      }\r\n    }\r\n  }\r\n  .layer_wrap{\r\n    position: absolute;\r\n    top: @topMargin;\r\n    left: 70%;\r\n    z-index: 2;\r\n    text-align: left;\r\n    .selector_wrap{\r\n      background-color: cornflowerblue;\r\n      display: inline-flex;\r\n      border-radius: 3px;\r\n      padding: 10px 0;\r\n      .layer_item{\r\n        padding: 0 10px;\r\n        border-right: 1px solid burlywood;\r\n      }\r\n      .last_item{\r\n        border-right: 0;\r\n      }\r\n    }\r\n    .date_picker{\r\n      margin-top: 5px;\r\n    }\r\n  }\r\n  .chart_wrap{\r\n    position: absolute;\r\n    left: @leftMargin;\r\n    bottom: 1rem;\r\n    width: 40%;\r\n  }\r\n  .chart-enter-active, .chart-leave-active{\r\n    transition: opacity .3s ease;\r\n  }\r\n  .chart-enter, .chart-leave-to{\r\n    opacity: 0;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=4a817586&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=4a817586&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4a817586\",\n  null\n  \n)\n\nexport default component.exports","import moment from 'moment'\r\nexport default {\r\n  data () {\r\n    return {\r\n      personCategory: [\r\n        {\r\n          code: 'age',\r\n          label: '按年龄'\r\n        },\r\n        {\r\n          code: 'sex',\r\n          label: '按性别'\r\n        },\r\n        {\r\n          code: 'area',\r\n          label: '按区域'\r\n        }\r\n      ],\r\n      totalTypeList: [\r\n        {\r\n          code: 'day',\r\n          label: '昨日数据',\r\n          value: 1\r\n        },\r\n        {\r\n          code: 'day3',\r\n          label: '三日累计',\r\n          value: 3\r\n        },\r\n        {\r\n          code: 'day7',\r\n          label: '七日累计',\r\n          value: 7\r\n        },\r\n        {\r\n          code: 'day15',\r\n          label: '十五日累计',\r\n          value: 15\r\n        },\r\n        {\r\n          code: 'custom',\r\n          label: '自定义时间范围',\r\n          value: 0\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    filterMapDataBySubDate (sub, data) {\r\n      if (!Array.isArray(data)) {\r\n        return\r\n      }\r\n      const endDate = moment().subtract(sub, 'day')\r\n      const targetData = data.filter((item) => {\r\n        const dataDate = moment(item.date)\r\n        return dataDate.isAfter(endDate)\r\n      })\r\n      return targetData\r\n    },\r\n    /**\r\n     * 返回一个日期范围内的数据，包括startDate, 但不包括endDate\r\n     * @param {*} startDate\r\n     * @param {*} endDete\r\n     * @param {*} data\r\n     * @returns Array\r\n     */\r\n    filterMapDataByDateRange (startDate, endDete, data) {\r\n      const start = moment(startDate).subtract(1, 'day')\r\n      const end = moment(endDete)\r\n      const targetData = data.filter((item) => {\r\n        const dataDate = moment(item.date)\r\n        return dataDate.isBetween(start, end)\r\n      })\r\n      return targetData\r\n    }\r\n  }\r\n\r\n}\r\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&id=4a817586&lang=less&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&id=34e941a7&lang=less&scoped=true&\""],"sourceRoot":""}