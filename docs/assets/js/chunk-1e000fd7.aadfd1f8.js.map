{"version":3,"sources":["webpack:///./src/components/timeLine.vue?a0ae","webpack:///src/components/timeLine.vue","webpack:///./src/components/timeLine.vue?c3bc","webpack:///./src/components/timeLine.vue","webpack:///./src/components/timeLine.vue?c888"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","$event","isPlay","_v","_s","curMonthStr","_l","item","index","key","no","class","active","old","setProgressHandle","str","staticRenderFns","data","dateList","isVli","player","curMonth","isLatest","progress","curDate","props","startDate","endDate","speed","created","initDates","watch","newVal","stopPlay","startPlay","format","mounted","methods","length","daysInMonth","num","get","push","date","console","self","window","setInterval","diff","reset","covidDataUtil","covidDefaultStartTime","$emit","updateMonth","forEach","component"],"mappings":"0IAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,UAAU,CAAEN,EAAU,OAAEI,EAAG,MAAM,CAACE,YAAY,WAAWC,GAAG,CAAC,MAAQ,SAASC,GAAQR,EAAIS,QAAS,MAAUL,EAAG,MAAM,CAACE,YAAY,OAAOC,GAAG,CAAC,MAAQ,SAASC,GAAQR,EAAIS,QAAS,UAAaL,EAAG,MAAM,CAACE,YAAY,SAAS,CAACN,EAAIU,GAAGV,EAAIW,GAAGX,EAAIY,kBAAkBR,EAAG,MAAM,CAACE,YAAY,kBAAkBN,EAAIa,GAAIb,EAAY,UAAE,SAASc,EAAKC,GAAO,OAAOX,EAAG,MAAM,CAACY,IAAIF,EAAKG,GAAGX,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,WAAWY,MAAM,CAACC,OAAQL,EAAKM,KAAKb,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOR,EAAIqB,kBAAkBN,OAAWX,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIU,GAAGV,EAAIW,GAAGG,EAAKQ,aAAY,MAChzBC,EAAkB,G,iECiCtB,uBACe,GACbC,KADF,WAEI,MAAO,CACLC,SAAUA,GACVC,OAAOA,EACPjB,QAAQA,EACRkB,OAAQA,KACRC,cAAUA,EACVhB,iBAAaA,EACbiB,UAAUA,EACVC,SAAUA,EACVC,QAASA,KAAKA,YAGlBC,MAAOA,CACLC,UAAWA,OACXC,QAASA,OACTC,MAAOA,QAETC,QAnBF,WAoBInC,KAAKoC,UAAUpC,KAAKgC,YAEtBK,MAAOA,CACL7B,OADJ,SACA8B,GACWA,EAGHtC,KAAKuC,WAFLvC,KAAKwC,aAKTb,SARJ,SAQAW,GACMtC,KAAKW,YAAc2B,EAAOG,OAAO,cAGrCC,QAlCF,aAqCEC,QAASA,CACPP,UADJ,SACAJ,GACMhC,KAAK2B,SAAW,IAAOK,GACvB,IAAIY,EAAS,IAAOZ,GAAWa,cAC3BC,EAAM,IAAOd,GAAWe,IAAI,QACtC,QACM/C,KAAKwB,SAAW,GAChB,IAAK,IAAX,YACQxB,KAAKwB,SAASwB,KAAK,CACjBhC,GAAIA,EAAIA,EACRK,IAAKA,GAAfA,gBACUF,KAAKA,EACL8B,KAAMA,IAAOA,GAAWA,IAAIA,EAAGA,OAAOA,OAAOA,EAAcA,cAG/DC,QAAQA,IAAIA,KAAKA,UACjBlD,KAAKyB,OAAQ,GAEfe,UAlBJ,WAmBUxC,KAAK0B,QACP1B,KAAKuC,WAEP,IAAIY,EAAOnD,KACXA,KAAK0B,OAAS0B,OAAOC,aAAY,WAE/B,OAAIF,EAAKvB,UACPuB,EAAKA,gBACLA,EAAKA,SAIH,IAAOA,EAAKrB,SAASiB,IAAI,WAAa,IAAOI,EAAKxB,UAAUoB,IAAI,UAClEI,EAAKA,YAAYA,EAAKA,cACtBA,EAAKA,SAAWA,SAId,IAAOA,EAAKrB,SAASwB,KAAK,MAAU,SAAW,EACjDH,EAAKA,UAAWA,EAIdA,EAAK3B,SAASoB,OAAS,IACzBO,EAAKA,SAASA,EAAKA,UAAUA,KAAMA,EACnCA,EAAKA,MAAMA,aAAcA,EAAKA,SAC9BA,EAAKA,UAAYA,EAAKA,MACtBA,EAAKA,QAAUA,IAAOA,EAAKA,SAASA,IAAIA,EAAKA,MAAOA,OAAOA,OAAOA,EAAcA,gBAE1F,MAEIZ,SAlDJ,WAmDMa,OAAOA,cAAcA,KAAKA,QAC1BpD,KAAK0B,OAAS,MAEhB6B,MAtDJ,WAuDM,IAAIvB,EAAYwB,EAAcC,sBAC9BzD,KAAK0D,MAAM,aAAc1B,GACzBhC,KAAKoC,UAAUJ,GACfhC,KAAK2B,SAAW,IAAOK,GACvBhC,KAAKQ,QAAS,EACdR,KAAK4B,UAAW,GAElB+B,YA9DJ,SA8DAV,GACMjD,KAAK2B,SAAW,IAAOsB,GACvBjD,KAAKoC,UAAUa,IAEjB7B,kBAlEJ,SAkEAN,GACMd,KAAK6B,SAAWf,EAChBd,KAAKwB,SAASoC,SAAQ,SAA5B,KACQX,EAAKA,IAAMA,GAAKA,KAElBjD,KAAK8B,QAAU9B,KAAKwB,SAASV,GAAOmC,KACpCjD,KAAK0D,MAAM,aAAc1D,KAAK8B,YChJ8S,I,wBCQ9U+B,EAAY,eACd,EACA/D,EACAwB,GACA,EACA,KACA,KACA,MAIa,aAAAuC,E,6CCnBf,W","file":"assets/js/chunk-1e000fd7.aadfd1f8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"time-line-warp\"},[_c('div',{staticClass:\"left\"},[_c('div',{staticClass:\"start-btn\"},[_c('div',{staticClass:\"circle\"},[(_vm.isPlay)?_c('div',{staticClass:\"triangle\",on:{\"click\":function($event){_vm.isPlay = false}}}):_c('div',{staticClass:\"stop\",on:{\"click\":function($event){_vm.isPlay = true}}})])]),_c('div',{staticClass:\"month\"},[_vm._v(_vm._s(_vm.curMonthStr))])]),_c('div',{staticClass:\"time-line-main\"},_vm._l((_vm.dateList),function(item,index){return _c('div',{key:item.no,staticClass:\"date-item\"},[_c('div',{staticClass:\"top-line\",class:{active: item.old},on:{\"click\":function($event){return _vm.setProgressHandle(index)}}}),_c('div',{staticClass:\"date-label\"},[_vm._v(_vm._s(item.str))])])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"time-line-warp\">\r\n    <!-- 左侧 -->\r\n    <div class=\"left\">\r\n      <!-- 开始按钮 -->\r\n      <div class=\"start-btn\">\r\n        <div class=\"circle\">\r\n          <div v-if=\"isPlay\" class=\"triangle\" @click=\"isPlay = false\"></div>\r\n          <div v-else class=\"stop\" @click=\"isPlay = true\"></div>\r\n        </div>\r\n      </div>\r\n      <div class=\"month\">{{curMonthStr}}</div>\r\n    </div>\r\n    <!-- 进度条 -->\r\n    <div class=\"time-line-main\">\r\n      <!-- 进度条 -->\r\n      <!-- <div class=\"top-line\">\r\n        <div class=\"progress\" :style=\"{width: progress * unitLen + '%'}\"></div>\r\n        <div v-if=\"isVli\">\r\n          <i v-for=\"item in dateList\" :key=\"item.no\" :style=\"{left:item.offset + '%'}\"></i>\r\n        </div>\r\n        <div class=\"bottom\"></div>\r\n      </div> -->\r\n      <!-- 日期 -->\r\n        <div class=\"date-item\" v-for=\"(item, index) in dateList\" :key=\"item.no\">\r\n          <div class=\"top-line\" :class=\"{active: item.old}\" @click=\"setProgressHandle(index)\"></div>\r\n          <div class=\"date-label\">{{item.str}}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport moment from 'moment'\r\nimport mapUtil from '../utils/mapUtil'\r\nconst covidDataUtil = mapUtil.covidDataUtil\r\nexport default {\r\n  data () {\r\n    return {\r\n      dateList: [], // 每月的日期列表\r\n      isVli: false, // 是否显示日期\r\n      isPlay: true, // 播放/停止\r\n      player: null, // 播放定时器\r\n      curMonth: undefined, // 当前月\r\n      curMonthStr: undefined, // 当前月(string),\r\n      isLatest: false, // 最进\r\n      progress: 0,\r\n      curDate: this.startDate\r\n    }\r\n  },\r\n  props: {\r\n    startDate: String,\r\n    endDate: String,\r\n    speed: Number\r\n  },\r\n  created () {\r\n    this.initDates(this.startDate)\r\n  },\r\n  watch: {\r\n    isPlay (newVal) {\r\n      if (!newVal) {\r\n        this.startPlay()\r\n      } else {\r\n        this.stopPlay()\r\n      }\r\n    },\r\n    curMonth (newVal) {\r\n      this.curMonthStr = newVal.format('YYYY年MM月')\r\n    }\r\n  },\r\n  mounted () {\r\n\r\n  },\r\n  methods: {\r\n    initDates (startDate) {\r\n      this.curMonth = moment(startDate)\r\n      var length = moment(startDate).daysInMonth()\r\n      var num = moment(startDate).get('date')\r\n      const countInCurMonth = length - num + 1\r\n      this.dateList = []\r\n      for (let i = 0; i < countInCurMonth; i++) {\r\n        this.dateList.push({\r\n          no: i + 1,\r\n          str: `${num + i}日`,\r\n          old: false,\r\n          date: moment(startDate).add(i, 'day').format(covidDataUtil.dateFormat)\r\n        })\r\n      }\r\n      console.log(this.dateList)\r\n      this.isVli = true\r\n    },\r\n    startPlay () {\r\n      if (this.player) {\r\n        this.stopPlay()\r\n      }\r\n      var self = this\r\n      this.player = window.setInterval(() => {\r\n        // 播放完毕\r\n        if (self.isLatest) {\r\n          self.stopPlay()\r\n          self.reset()\r\n          return\r\n        }\r\n\r\n        if (moment(self.curDate).get('month') !== moment(self.curMonth).get('month')) {\r\n          self.updateMonth(self.curDate)\r\n          self.progress = 0\r\n          return\r\n        }\r\n\r\n        if (moment(self.curDate).diff(moment(), 'days') >= 0) {\r\n          self.isLatest = true\r\n          return\r\n        }\r\n\r\n        if (self.dateList.length > 0) {\r\n          self.dateList[self.progress].old = true\r\n          self.$emit('changeDate', self.curDate)\r\n          self.progress += self.speed\r\n          self.curDate = moment(self.curDate).add(self.speed, 'day').format(covidDataUtil.dateFormat)\r\n        }\r\n      }, 1000)\r\n    },\r\n    stopPlay () {\r\n      window.clearInterval(this.player)\r\n      this.player = null\r\n    },\r\n    reset () {\r\n      var startDate = covidDataUtil.covidDefaultStartTime\r\n      this.$emit('changeDate', startDate)\r\n      this.initDates(startDate)\r\n      this.curMonth = moment(startDate)\r\n      this.isPlay = true\r\n      this.isLatest = false\r\n    },\r\n    updateMonth (date) {\r\n      this.curMonth = moment(date)\r\n      this.initDates(date)\r\n    },\r\n    setProgressHandle (index) {\r\n      this.progress = index\r\n      this.dateList.forEach((date, i) => {\r\n        date.old = i <= index\r\n      })\r\n      this.curDate = this.dateList[index].date\r\n      this.$emit('changeDate', this.curDate)\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\">\r\n  .time-line-warp{\r\n    height: 60px;\r\n    .left{\r\n      width: 6%;\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: flex-end;\r\n      .start-btn{\r\n        left: 15px;\r\n        top: -15px;\r\n        position: absolute;\r\n        .circle{\r\n          width: 40px;\r\n          height: 40px;\r\n          border-radius: 20px;\r\n          background-color: #9a9ab5;\r\n          .triangle{\r\n            width: 0;\r\n            height: 0;\r\n            border-top: 12px solid transparent;\r\n            border-bottom: 12px solid transparent;\r\n            border-left: 18px solid #1c943c;\r\n            left: 13px;\r\n            top: 7px;\r\n            position: relative;\r\n            cursor: pointer;\r\n          }\r\n          .stop{\r\n            width: 18px;\r\n            height: 25px;\r\n            border-style: double;\r\n            border-width: 0px 0px 0px 16px;\r\n            border-color: #c5b7b7;\r\n            top: 7px;\r\n            left: 12px;\r\n            position: relative;\r\n            cursor: pointer;\r\n          }\r\n        }\r\n      }\r\n      .month{\r\n        left: 0px;\r\n        position: relative;\r\n      }\r\n    }\r\n    .time-line-main{\r\n      display: flex;\r\n      -webkit-box-orient: horizontal;\r\n      -webkit-box-direction: normal;\r\n      -ms-flex-direction: row;\r\n      flex-direction: row;\r\n      flex-grow: 1;\r\n      .date-item{\r\n        flex-grow: 1;\r\n        display: flex;\r\n        flex-direction: column;\r\n        .top-line{\r\n          height: 20px;\r\n          border-left: 1px solid #fff;\r\n          background: #aeb3af;\r\n          height: 10px;\r\n          cursor: pointer;\r\n        }\r\n        .active{\r\n          background: #187b33;\r\n        }\r\n        .date-label{\r\n          flex-grow: 1;\r\n          border-left: 1px solid #9a9386;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./timeLine.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./timeLine.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./timeLine.vue?vue&type=template&id=3d6f4738&\"\nimport script from \"./timeLine.vue?vue&type=script&lang=js&\"\nexport * from \"./timeLine.vue?vue&type=script&lang=js&\"\nimport style0 from \"./timeLine.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./timeLine.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}